<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Login to coffee shop and enjoy your favorite drink"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&family=Sacramento&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../style/login.css" />
    <title>Login</title>
  </head>
  <body>
    <div class="container">
      <div class="img">
        <img src="../images/barista-woman.png" alt="barista-woman" />
      </div>

      <main>
        <header>
          <div class="logo">
            <img
              src="../images/icon/Frame.svg"
              alt="icon-coffie"
              class="logo-icon"
            />
            <span class="logo-text">Coffee Shop</span>
          </div>
          <h1 class="login">Login</h1>
          <p class="from-subtitle">Fill out the form correctly</p>
        </header>

        <form>
          <div class="input-wrapper">
            <label class="label" for="email">Email</label>
            <input
              class="input"
              name="email"
              id="email"
              type="email"
              placeholder="Enter Your Email"
            />
            <img
              src="../images/icon/mail.svg"
              alt="icon-email"
              class="icon-name"
            />
          </div>

          <div class="input-wrapper">
            <label class="label" for="password">Password</label>
            <input
              class="input"
              name="password"
              id="password"
              type="password"
              placeholder="Enter Your Password"
            />
            <img
              src="../images/icon/Password.svg"
              alt="icon-email"
              class="icon-name"
            />

            <input type="checkbox" class="toggle" id="toggle" />

            <label for="toggle">
              <img
                src="../images/icon/EyeSlash.svg"
                alt="eye-icon"
                class="icon-name eye-icon"
              />

              <img
                src="../images/icon/eyeShow.svg"
                alt="eye-show-icon"
                class="icon-name eye-show-icon"
              />
            </label>
          </div>
          <a class="forget-password" href="./forgot-password.html"
            >Lupa Password?</a
          >

          <button type="submit" class="button">Login</button>
        </form>

        <footer class="footer">
          <p>Not Have An Account? <a href="./register.html">Register</a></p>
        </footer>

        <div class="or-line">
          <div class="line"></div>
          <span class="span-text">Or</span>
          <div class="line"></div>
        </div>

        <div class="container-icon">
          <a
            href="https://www.facebook.com/"
            target="_blank"
            class="container-facebook"
          >
            <img
              src="../images/icon/bx_bxl-facebook-circle.svg"
              alt="facebook-icon"
              class="facebook-icon"
            />
            <span class="facebook">Facebook</span>
          </a>
          <a
            href="https://www.google.com/"
            target="_blank"
            class="container-google"
          >
            <img
              src="../images/icon/flat-color-icons_google.svg"
              alt="google-icon"
              class="google-icon"
            />
            <span class="google">Google</span>
          </a>
        </div>
      </main>
    </div>
  </body>

  <script>
    const form = document.querySelector("form");
    const inputEmail = document.getElementById("email");
    const inputPassword = document.getElementById("password");
    const toggle = document.getElementById("toggle");

    const localMemory = JSON.parse(localStorage.getItem("user"));

    toggle.addEventListener("change", function (e) {
      if (e.target.checked) {
        inputPassword.type = "text";
      } else {
        inputPassword.type = "password";
      }
    });

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const email = inputEmail.value.trim();
      const password = inputPassword.value.trim();

      const labelEmail = form.querySelector(".input-wrapper:nth-child(1)");
      labelEmail.querySelector("span")?.remove();
      if (email === "") {
        const spanEmail = document.createElement("span");
        spanEmail.style.color = "red";
        spanEmail.textContent = "email tidak boleh kosong";
        return labelEmail.appendChild(spanEmail);
      }

      const labelPassword = form.querySelector(".input-wrapper:nth-child(2)");
      labelPassword.querySelector("span")?.remove();
      if (password === "") {
        const spanPassword = document.createElement("span");
        spanPassword.style.color = "red";
        spanPassword.textContent = "password tidak boleh kosong";
        return labelPassword.appendChild(spanPassword);
      }

      if (
        localMemory &&
        localMemory.email === email &&
        localMemory.password === password
      ) {
        window.location.href = "../index.html";
      } else {
        const spanPassword = document.createElement("span");
        spanPassword.style.color = "red";
        spanPassword.textContent = "email atau password salah";
        labelPassword.appendChild(spanPassword);
      }
    });
  </script>
</html>
